<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>manager</h2>
    <style>
        .alert {
            padding: 20px;
            background-color: green;
            color: white;
            margin: 10px 0;
        }
        
        .closebtn {
            margin-left: 15px;
            color: white;
            font-weight: bold;
            float: right;
            font-size: 22px;
            line-height: 20px;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .closebtn:hover {
            color: black;
        }
    </style>
    </head>

    <body>

        <h2>Alert Messages</h2>

        <!-- <p>Click on the "x" symbol to close the alert message.</p> -->
        <div class="alert-section">
            <!-- <div class="alert">
        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
        <strong>Notification!!!</strong> Indicates a dangerous or potentially negative action.
      </div> -->
        </div>

        <script src="https://cdn.socket.io/4.4.1/socket.io.min.js" integrity="sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H" crossorigin="anonymous"></script>
        <script>
            const socket = io("http://localhost:5000", {
                auth: {
                    token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImdhYmluaXNoaW13ZTAyQGdtYWlsLmNvbSIsInVzZXJJZCI6MTAsImlhdCI6MTY1MDI3Nzg4NywiZXhwIjoxNjUwMzY0Mjg3fQ.1qa8oyyF2El6bVGqnwcvguVGn_6SDAhEM8F54vhIU2w"
                },
            })

            const notification = document.querySelector(".alert-section")
            socket.on("notification", (data) => {
                notification.innerHTML += `<div class="alert">
  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
  ${data}
</div>`
            })

            socket.on("authFailed", (data) => {
                console.log(data)
            })

            socket.on("user", data => {
                socket.emit("checkManager", data)
            })
        </script>
    </body>

</html>